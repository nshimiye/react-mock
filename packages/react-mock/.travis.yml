language: node_js
branches:
  only:
    - testing/e2e
    - master
    - release
    - /^greenkeeper/.*$/
notifications:
  email: false
node_js:
  - node
script:
  - npm run test:prod
  - npm run build
  - npx cypress run
deploy:
  - skip_cleanup: true
  - provider: script
    script:
      - npm run report-coverage
      - npm run deploy-docs
      - npm run semantic-release
    on:
      branch: release
